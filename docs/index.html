<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple_kb - Eiffel Knowledge Base with AI-Enhanced RAG</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="https://raw.githubusercontent.com/simple-eiffel/claude_eiffel_op_docs/main/artwork/LOGO.png" alt="simple_* logo" class="logo">
        </div>
        <h1>simple_kb</h1>
        <p class="tagline">Eiffel Knowledge Base with AI-Enhanced RAG</p>
        <div class="badges">
            <span class="badge badge-version">v1.0.0</span>
            <span class="badge badge-license">MIT</span>
        </div>
    </header>
    <nav>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#rag">RAG</a></li>
            <li><a href="#stats">Statistics</a></li>
            <li><a href="#cli">CLI</a></li>
            <li><a href="https://github.com/simple-eiffel/simple_kb">GitHub</a></li>
        </ul>
    </nav>
    <main>
        <section id="overview">
            <h2>Overview</h2>
            <p><strong>simple_kb</strong> is a comprehensive Eiffel knowledge base featuring FTS5 full-text search, AI-enhanced RAG (Retrieval-Augmented Generation), compiler error documentation, design patterns, and source code indexing.</p>
            <p>Part of the <a href="https://github.com/simple-eiffel">Simple Eiffel</a> ecosystem.</p>
        </section>

        <section id="rag">
            <h2>What is RAG?</h2>
            <p><strong>RAG (Retrieval-Augmented Generation)</strong> combines traditional search with AI language models:</p>
            <ul>
                <li><strong>Retrieval</strong>: Find relevant documents from a knowledge base</li>
                <li><strong>Augmentation</strong>: Provide retrieved context to an AI model</li>
                <li><strong>Generation</strong>: AI synthesizes an answer using the context</li>
            </ul>
            <p>Unlike pure LLMs that may hallucinate, RAG grounds answers in actual knowledge base content.</p>

            <h3>4-Phase RAG Cascade</h3>
            <table class="api-table">
                <thead><tr><th>Phase</th><th>Method</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>FAQ Match</td><td>Curated Q&amp;A database with confidence scores (sub-ms response)</td></tr>
                    <tr><td>2</td><td>FTS5 Search</td><td>Full-text search using SQLite FTS5 with BM25 ranking</td></tr>
                    <tr><td>3</td><td>Query Expansion</td><td>Semantic synonyms expand search (void-&gt;attached)</td></tr>
                    <tr><td>4</td><td>LLM Synthesis</td><td>Ollama provides contextual answers for complex queries</td></tr>
                </tbody>
            </table>

            <div class="code-block">
                <pre># AI-enhanced RAG query
kb ai "How do I handle void safety in Eiffel?"
kb ai "Explain SCOOP inline separate syntax"
kb ai "What is the difference between once and create?"</pre>
            </div>
        </section>

        <section id="stats">
            <h2>Database Statistics</h2>
            <div class="feature-grid">
                <div class="feature-card"><h4>182</h4><p>Libraries indexed</p></div>
                <div class="feature-card"><h4>4,613</h4><p>Classes</p></div>
                <div class="feature-card"><h4>87,780</h4><p>Features</p></div>
                <div class="feature-card"><h4>31</h4><p>Error codes</p></div>
                <div class="feature-card"><h4>14</h4><p>Design patterns</p></div>
                <div class="feature-card"><h4>273</h4><p>Rosetta examples</p></div>
                <div class="feature-card"><h4>25</h4><p>FAQs (code-study)</p></div>
            </div>
        </section>

        <section id="cli">
            <h2>CLI Commands</h2>
            <table class="api-table">
                <thead><tr><th>Command</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>kb search query</code></td><td>Full-text search</td></tr>
                    <tr><td><code>kb class NAME</code></td><td>Show class details</td></tr>
                    <tr><td><code>kb error CODE</code></td><td>Compiler error lookup</td></tr>
                    <tr><td><code>kb pattern NAME</code></td><td>Design pattern</td></tr>
                    <tr><td><code>kb ai question</code></td><td>AI-enhanced RAG query</td></tr>
                    <tr><td><code>kb ingest path</code></td><td>Index source files</td></tr>
                    <tr><td><code>kb rosetta path</code></td><td>Import Rosetta examples</td></tr>
                    <tr><td><code>kb seed</code></td><td>Populate errors + patterns</td></tr>
                    <tr><td><code>kb clear</code></td><td>Clear all database content</td></tr>
                    <tr><td><code>kb stats</code></td><td>Database statistics</td></tr>
                </tbody>
            </table>
        </section>

        <section id="rebuild">
            <h2>Rebuilding the Database</h2>
            <p>A pre-built <code>bin/kb.db</code> is included with 4,613 classes and 87,780 features. To rebuild from scratch:</p>
            <div class="code-block">
                <pre># 1. Clear existing database
kb clear

# 2. Seed with error codes, patterns, and FAQ entries
kb seed

# 3. Ingest your Eiffel source libraries
kb ingest /d/prod                    # Index all simple_* libraries
kb ingest "$ISE_LIBRARY/library"     # Index EiffelStudio stdlib

# 4. Import Rosetta Code examples (optional)
kb rosetta /d/prod/simple_rosetta

# 5. Verify
kb stats</pre>
            </div>
            <h3>Ingestion Details</h3>
            <ul>
                <li>Extracts class names, inheritance, feature signatures</li>
                <li>Indexes feature comments and contracts (require/ensure)</li>
                <li>Stores source file paths for navigation</li>
                <li>Uses SCOOP-capable parser (GitHub Gobo 2024)</li>
            </ul>
            <p>Large codebases may take several minutes to index.</p>
        </section>

        <section id="errors">
            <h2>Compiler Error Codes</h2>
            <div class="feature-grid">
                <div class="feature-card"><h4>VEVI</h4><p>Variable not properly set</p></div>
                <div class="feature-card"><h4>VJAR</h4><p>Type mismatch</p></div>
                <div class="feature-card"><h4>VUAR</h4><p>Wrong argument count</p></div>
                <div class="feature-card"><h4>VUEX</h4><p>Feature not exported</p></div>
                <div class="feature-card"><h4>VEEN</h4><p>Feature unknown</p></div>
                <div class="feature-card"><h4>VD89</h4><p>Dependency cycle</p></div>
            </div>
        </section>

        <section id="installation">
            <h2>Installation</h2>
            <div class="code-block">
                <pre>export SIMPLE_KB=/path/to/simple_kb</pre>
            </div>
            <div class="code-block">
                <pre>&lt;library name="simple_kb" location="$SIMPLE_KB/simple_kb.ecf"/&gt;</pre>
            </div>
        </section>
    </main>
    <footer>
        <p>2025 simple_* ecosystem. MIT License.</p>
        <p><a href="https://github.com/simple-eiffel/simple_kb">GitHub</a> | <a href="https://simple-eiffel.github.io">Documentation</a></p>
    </footer>
</body>
</html>
